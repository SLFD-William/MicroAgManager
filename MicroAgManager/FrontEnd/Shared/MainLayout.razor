
@inherits LayoutComponentBase
@inject NavigationManager navigationManager
@inject ApplicationStateProvider app
<div class="MainLayout">
<AuthorizeView>
    <Authorized>
        <header>
            <NavMenuMain></NavMenuMain>
        </header>
@*         <aside>

        </aside> *@
        <main>
            @Body
        </main>
        <footer>@app.StatusMessage</footer>
    </Authorized>
    <Authorizing>
        @Body
    </Authorizing>
    <NotAuthorized>
        @if (!(navigationManager.Uri.Contains("/authentication/")) || navigationManager.Uri.Contains("logged-out"))
        {<LandingPage></LandingPage>}
        else
        {@Body}
    </NotAuthorized>
</AuthorizeView>
</div>
@code{
    protected virtual void AppStatusChanged() => StateHasChanged();
    protected override void OnInitialized() => app.OnStatusChanged += AppStatusChanged;
    public virtual ValueTask DisposeAsync()
    {
        app.OnStatusChanged -= AppStatusChanged;
        return ValueTask.CompletedTask;
    }
}
